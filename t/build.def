OPTIONS {
  CFLAGS => ' -g '
} : []

e.a { genflags=>[['{{[post=>"/"]pdir}}Makefile.e.flags.{{os.make.ext}}.mk', {'trim'=>1},
                 "PERL_CCOPTS=`{{if[dos]cd build && nocyg.bat fi}} perl -MExtUtils::Embed -e ccopts`
	          PERL_LDOPTS=`{{if[dos]cd build && nocyg.bat fi}} perl -MExtUtils::Embed -e ldopts`
                 "]],
      CINC=>['perl'] }
: [
     {{[post=>'/']pdir}}e.c : {
       'cflags'=>['PERL_CCOPTS','CFLAGS'], 'ldflags'=>'PERL_LDOPTS',
       'gen' => {
         'from' => 'perl/e.xs',
         'cmd'  => "{{PERL}} {{PERLLIB}}/ExtUtils/xsubpp -typemap {{PERLLIB}}/ExtUtils/typemap -typemap typemap {{file perl/e.xs elif}} -output \$@" } 
     }
     

]

libe.a : [
     parse.c 
     tok.c 
]

libgtest.a : [
     perl/tmp-gtest/gtest-1.7.0/src/gtest-all.cc
]



test1.exe : [
     e.a 
     libgtest.a 
     libe.a
     perl/t/test1.cpp 
]
